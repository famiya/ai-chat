# AI Multi-Platform Chat Plugin

一個功能強大的 WordPress 插件，整合了 **AI 智能對話** 和 **多平台聊天** 功能，讓您的網站訪客可以透過 AI 助手獲得即時回應，或直接連接到您的社群媒體平台進行人工客服。

## 🌟 主要特色

### 🤖 AI 智能對話
- **多 AI 模型支援**：支援 GPT-4、Claude、Gemini 等主流 AI 模型
- **多語言智能回應**：自動偵測 URL 語言環境（如 `/zh/`）並用對應語言回應
- **對話歷史保存**：基於 IP 地址的對話記錄保存和載入
- **Typing 指示器**：真實的對話體驗，支援多語言顯示
- **自訂系統提示**：可設定 AI 的角色和回應風格

### 📱 多平台整合
支援 15+ 個主流聊天平台：
- **即時通訊**：WhatsApp、LINE、Telegram、WeChat 微信
- **社群媒體**：Facebook Messenger、Instagram、Twitter/X
- **商務平台**：Microsoft Teams、Slack、Discord、Skype
- **其他平台**：QQ、Viber、Email、電話

### 🎨 完全客製化
- **7 種位置選項**：包含向下展開的上方位置（left-top、right-bottom）
- **3 種尺寸選擇**：小型、中型、大型
- **自訂顏色**：支援任意顏色選擇
- **動畫效果**：流暢的使用者體驗
- **響應式設計**：完美支援手機和電腦

### 🔧 智能顯示邏輯
- **單一平台**：直接開啟對應的聊天視窗或跳轉連結
- **多平台**：顯示氣泡選擇器，讓用戶選擇偏好的平台
- **氣泡模式**：可選擇是否啟用氣泡展開效果

## 📋 系統需求

- **WordPress**：5.0 或更新版本
- **PHP**：7.4 或更新版本
- **MySQL**：5.6 或更新版本

## 🚀 安裝說明

1. **下載插件**：將插件文件上傳到 `/wp-content/plugins/ai-chat/` 目錄
2. **啟用插件**：在 WordPress 後台的「插件」頁面啟用「AI Multi-Platform Chat」
3. **基本設定**：前往「AI Chat」設定頁面進行配置

## ⚙️ 設定指南

### 1. 選擇聊天平台
在左側面板勾選您要啟用的平台：
- 可使用快速選擇按鈕：熱門組合、社群組合、全選、清除
- 支援多選，系統會自動顯示對應的設定選項

### 2. 平台設定（中間面板）

#### AI 聊天設定
- **API 提供商**：選擇 OpenRouter.ai 或自訂 API
- **API 金鑰**：輸入您的 AI API 金鑰
- **AI 模型**：選擇要使用的 AI 模型（如 `openai/gpt-3.5-turbo`）
- **系統提示**：設定 AI 的角色和回應風格

#### 社群平台設定
每個平台都有對應的設定選項：
- **WhatsApp**：電話號碼（國際格式，如 +886912345678）
- **LINE**：用戶名稱或頻道 ID
- **WeChat**：QR Code 圖片 URL
- **Facebook**：Messenger 連結
- **其他平台**：相應的用戶名稱或連結

### 3. 顯示設定（右側面板）
- **按鈕位置**：7 種位置選項
  - `bottom-right`：右下角
  - `bottom-left`：左下角
  - `left-middle`：左側中間
  - `right-middle`：右側中間
  - `left-top`：左上角（向下展開）
  - `right-bottom`：右下角（向下展開）
  - `top-right`：右上角
- **按鈕顏色**：自訂主題色彩
- **按鈕大小**：小型、中型、大型
- **顯示選項**：
  - 手機裝置顯示
  - 動畫效果
  - 氣泡模式

## 🎯 使用方式

### 前端顯示邏輯
1. **單一平台**：
   - AI Chat：開啟聊天視窗
   - 其他平台：直接跳轉到對應平台

2. **多平台**：
   - 顯示主按鈕
   - 點擊後展開平台選擇氣泡
   - 用戶選擇偏好的平台

### AI 對話功能
- **語言自動偵測**：根據 URL 路徑自動切換語言
- **對話記錄**：基於 IP 地址保存對話歷史
- **Typing 指示器**：顯示 AI 正在輸入的狀態

## 📊 後台管理

### 聊天記錄
- 查看所有對話記錄
- 按日期、平台篩選
- 查看詳細對話內容
- 統計數據分析

### 數據管理
- 自動清理舊記錄（可設定保留天數）
- 匯出聊天數據
- 數據庫優化

## 🔧 API 設定

### OpenRouter.ai（推薦）
1. 註冊 [OpenRouter.ai](https://openrouter.ai/) 帳號
2. 獲取 API 金鑰
3. 在插件設定中輸入金鑰
4. 選擇適合的 AI 模型

### 自訂 API
支援任何相容 OpenAI API 格式的服務：
- 設定 API URL
- 輸入 API 金鑰
- 指定模型名稱

## 🌍 多語言支援

插件支援多語言環境：
- **繁體中文**（zh_TW）
- **簡體中文**（zh_CN）
- **英文**（en_US）

AI 會根據 URL 路徑自動偵測語言：
- `/zh/` 路徑：使用中文回應
- 其他路徑：使用英文回應

## 🎨 自訂樣式

插件提供完整的 CSS 類別，方便進行樣式自訂：

```css
/* 主要容器 */
.ai-chat-widget {
    /* 自訂樣式 */
}

/* 聊天按鈕 */
.chat-toggle {
    /* 自訂樣式 */
}

/* 聊天視窗 */
.chat-window {
    /* 自訂樣式 */
}
```

## 🔒 安全性

- **Nonce 驗證**：所有 AJAX 請求都經過安全驗證
- **數據清理**：所有用戶輸入都經過適當的清理和驗證
- **權限檢查**：後台功能需要適當的用戶權限

## 📈 效能優化

- **條件載入**：只在需要時載入腳本和樣式
- **快取機制**：設定和對話數據的智能快取
- **數據庫優化**：自動清理舊記錄，保持數據庫效能

## 🐛 故障排除

### 常見問題

1. **聊天按鈕不顯示**
   - 檢查是否已啟用至少一個平台
   - 確認手機顯示設定（如果在手機上測試）

2. **AI 無法回應**
   - 檢查 API 金鑰是否正確
   - 確認 API 額度是否充足
   - 測試 API 連接

3. **對話記錄不保存**
   - 檢查數據庫表格是否正確創建
   - 確認 WordPress 數據庫權限



## 📞 技術支援

- **作者**：Eddie Shih
- **網站**：[hugoshih.eu.org](https://hugoshih.eu.org)
- **Email**：blog@hugoshih.eu.org
- **文檔**：[使用說明](https://hugoshih.eu.org/ai-chat-docs)

## 📄 授權

本插件採用 GPL v2 或更新版本授權。

## 🔄 更新日誌

### 1.1.0
- 移除所有調試和測試代碼
- 優化系統性能和穩定性
- 改進產品信息多語言化
- 增強外部數據源整合
- 優化 AI 系統提示邏輯
- 提升用戶體驗和界面響應

### 1.0.0
- 初始版本發布
- AI 智能對話功能
- 15+ 平台整合
- 多語言支援
- 對話歷史保存
- 完整的後台管理介面

---

**感謝使用 AI Multi-Platform Chat Plugin！** 🎉
